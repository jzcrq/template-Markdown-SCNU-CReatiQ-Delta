# 数学

## Set Xor-Min

维护一个集合 $S$，可以求 $\min_{y \in S} (x \oplus y)$。

```cpp
struct SetXorMin
{
	static constexpr int L=30;
	int tot=0;
	vector<array<int,2>> c;
	vector<int> s;
	set<i64> in;

	SetXorMin() {}
	SetXorMin(int n)
	{
		c.resize((n+1)*(L+1));
		s.resize((n+1)*(L+1));
	}

	void insert(i64 x)
	{
		if (in.count(x))
			return;
		in.insert(x);
		int p=0;
		for (int i=L;i>=0;i--)
		{
			bool o=x>>i&1;
			if (!c[p][o])
				c[p][o]=++tot;
			s[p=c[p][o]]++;
		}
	}

	void erase(i64 x)
	{
		if (!in.count(x))
			return;
		in.erase(x);
		int p=0;
		for (int i=L;i>=0;i--)
		{
			bool o=x>>i&1;
			s[p=c[p][o]]--;
		}
	}

	i64 QueryXorMin(i64 x)
	{
		int p=0;
		i64 r=0;
		for (int i=L;i>=0;i--)
		{
			bool o=x>>i&1;
			if (s[c[p][o]])
				p=c[p][o];
			else
			{
				p=c[p][o^1];
				r|=1ll<<i;
			}
		}
		return r;
	}
};
```
